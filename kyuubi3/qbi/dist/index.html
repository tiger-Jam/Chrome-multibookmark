<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qbi - Knowledge Management</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <div class="header">
            <h1>üß† Qbi</h1>
            <p>Knowledge Builder</p>
        </div>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Tab 1: ÁÆ°ÁêÜ (Topic & SubTopic Management) -->
            <div id="tab-manage" class="tab-panel active">
                <div class="manage-container">
                    <!-- Hierarchical Topic/SubTopic Section -->
                    <div class="hierarchical-section">
                        <div class="section-header">
                            <h2>üìù Topic Management</h2>
                            <div class="actions">
                                <button id="add-topic-btn" class="btn btn-primary">+ Add Topic</button>
                                <button id="start-scraping-btn" class="btn btn-success" disabled>üîç Start Scraping</button>
                            </div>
                        </div>
                        <div id="topic-list" class="hierarchical-list">
                            <div class="empty-state">
                                <p>No topics yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 2: Ë≥áÊñô (Resource Stocks) -->
            <div id="tab-resources" class="tab-panel">
                <div class="resources-container">
                    <div class="section-header">
                        <h2>üìö Resource Stocks</h2>
                        <div class="status-indicator">
                            <span id="scraping-status">Ready</span>
                        </div>
                    </div>
                    <div id="resource-list" class="resource-list">
                        <div class="empty-state">
                            <p>No resources collected yet</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 3: Ë®ò‰∫ã (Article Generation) -->
            <div id="tab-articles" class="tab-panel">
                <div class="articles-container">
                    <div class="section-header">
                        <h2>‚úçÔ∏è Article Generation</h2>
                        <button id="generate-article-btn" class="btn btn-success" disabled>üìù Generate Article</button>
                    </div>
                    <div id="article-content" class="article-content">
                        <div class="empty-state">
                            <p>Generated articles will appear here</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab Bar -->
        <div class="tab-bar">
            <button class="tab-button active" data-tab="tab-manage">
                <div class="tab-icon">üìù</div>
                <div class="tab-label">ÁÆ°ÁêÜ</div>
            </button>
            <button class="tab-button" data-tab="tab-resources">
                <div class="tab-icon">üìö</div>
                <div class="tab-label">Ë≥áÊñô</div>
            </button>
            <button class="tab-button" data-tab="tab-articles">
                <div class="tab-icon">‚úçÔ∏è</div>
                <div class="tab-label">Ë®ò‰∫ã</div>
            </button>
        </div>
    </div>

    <!-- Topic Context Menu -->
    <div id="topic-context-menu" class="context-menu">
        <ul>
            <li id="add-subtopic-context">+ Add SubTopic</li>
            <li id="edit-topic-context">‚úèÔ∏è Edit Topic</li>
            <li id="delete-topic-context">üóëÔ∏è Delete Topic</li>
        </ul>
    </div>

    <!-- SubTopic Context Menu -->
    <div id="subtopic-context-menu" class="context-menu">
        <ul>
            <li id="edit-subtopic-context">‚úèÔ∏è Edit SubTopic</li>
            <li id="delete-subtopic-context">üóëÔ∏è Delete SubTopic</li>
        </ul>
    </div>

    <!-- Modals -->
    <div id="topic-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Topic</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="topic-name">Topic Name:</label>
                    <input type="text" id="topic-name" class="form-input" placeholder="Enter topic name...">
                </div>
                <div class="form-group">
                    <label for="topic-description">Description (optional):</label>
                    <textarea id="topic-description" class="form-input" placeholder="Enter description..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('topic-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="submitTopic()">Create</button>
            </div>
        </div>
    </div>

    <div id="subtopic-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add SubTopic</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="subtopic-name">SubTopic Name:</label>
                    <input type="text" id="subtopic-name" class="form-input" placeholder="Enter subtopic name...">
                </div>
                <div class="form-group">
                    <label for="subtopic-type">Template Type:</label>
                    <select id="subtopic-type" class="form-input">
                        <option value="">Custom</option>
                        <option value="history">Ê≠¥Âè≤</option>
                        <option value="trivia">Ë±ÜÁü•Ë≠ò</option>
                        <option value="background">ËÉåÊôØ</option>
                        <option value="technical">ÊäÄË°ìÁöÑË©≥Á¥∞</option>
                        <option value="cultural">ÊñáÂåñÁöÑÊÑèÁæ©</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="subtopic-description">Description (optional):</label>
                    <textarea id="subtopic-description" class="form-input" placeholder="Enter description..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('subtopic-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="submitSubTopic()">Create</button>
            </div>
        </div>
    </div>

    <!-- Edit Topic Modal -->
    <div id="edit-topic-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Topic</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="edit-topic-name">Topic Name:</label>
                    <input type="text" id="edit-topic-name" class="form-input" placeholder="Enter topic name...">
                </div>
                <div class="form-group">
                    <label for="edit-topic-description">Description (optional):</label>
                    <textarea id="edit-topic-description" class="form-input" placeholder="Enter description..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('edit-topic-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="updateTopic()">Update</button>
            </div>
        </div>
    </div>

    <!-- Edit SubTopic Modal -->
    <div id="edit-subtopic-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit SubTopic</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="edit-subtopic-name">SubTopic Name:</label>
                    <input type="text" id="edit-subtopic-name" class="form-input" placeholder="Enter subtopic name...">
                </div>
                <div class="form-group">
                    <label for="edit-subtopic-type">Template Type:</label>
                    <select id="edit-subtopic-type" class="form-input">
                        <option value="">Custom</option>
                        <option value="history">Ê≠¥Âè≤</option>
                        <option value="trivia">Ë±ÜÁü•Ë≠ò</option>
                        <option value="background">ËÉåÊôØ</option>
                        <option value="technical">ÊäÄË°ìÁöÑË©≥Á¥∞</option>
                        <option value="cultural">ÊñáÂåñÁöÑÊÑèÁæ©</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="edit-subtopic-description">Description (optional):</label>
                    <textarea id="edit-subtopic-description" class="form-input" placeholder="Enter description..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('edit-subtopic-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="updateSubTopic()">Update</button>
            </div>
        </div>
    </div>

    <script>
        // Tauri API„ÅåÂà©Áî®ÂèØËÉΩ„Å´„Å™„Çã„Åæ„ÅßÂæÖÊ©ü
        window.addEventListener('DOMContentLoaded', () => {
            console.log('üîç DOM loaded, checking for Tauri API...');
            console.log('üîç window.__TAURI__:', window.__TAURI__);
            console.log('üîç window.__TAURI_IIFE__:', window.__TAURI_IIFE__);
        });
    </script>
    <script src="js/app.js"></script>
</body>
</html>